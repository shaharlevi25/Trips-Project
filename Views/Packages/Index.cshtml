@model IEnumerable<TripsProject.Models.Package>

<link rel="stylesheet" href="~/css/packages.css" />

<h1>Travel Packages</h1>

<!-- סרגל חיפוש -->
<div class="mb-3">
    <input type="text" id="destination" placeholder="Destination" class="form-control mb-2" />
    <input type="date" id="startDate" class="form-control mb-2" />
    <input type="date" id="endDate" class="form-control mb-2" />
    <select id="isAvailable" class="form-control mb-2">
        <option value="">All</option>
        <option value="true">Available</option>
        <option value="false">Not Available</option>
    </select>
</div>

<!-- כאן תטען טבלת החבילות -->
<div id="packagesTable">
    @await Html.PartialAsync("_PackagesTable", Model)
</div>

<a asp-action="Create" class="btn btn-success mt-3">Add New Package</a>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
    function filterPackages() {
        $.get('@Url.Action("Filter", "Packages")', {
            destination: $('#destination').val(),
            startDate: $('#startDate').val(),
            endDate: $('#endDate').val(),
            isAvailable: $('#isAvailable').val()    
        }, function(data) {
            $('#packagesTable').html(data);
        });
    }

    // קריאה ל־filter בזמן הקלדה או שינוי
    $('#destination').on('keyup', filterPackages);
    $('#startDate, #endDate, #isAvailable').on('change', filterPackages);
</script>
}