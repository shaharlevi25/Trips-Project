@{
    ViewData["Title"] = "I forgot my password";
    string mode = ViewBag.Mode as string ?? "request";
    string email = ViewBag.Email as string ?? "";
}

<h2>I forgot my password.</h2>

@if (mode == "sent")
{
    <p>A password reset link will be sent to your email</p>
}
else if (mode == "reset")
{
    <form method="post" asp-action="ResetPassword" asp-controller="User">
        <input type="hidden" name="email" value="@email" />

        <div style="margin-bottom:10px;">
            <label>New password</label><br />
            <input type="password" name="newPassword" required />
        </div>

        <button type="submit">Update password</button>
    </form>
}
else
{
    <form method="post" asp-action="ForgotPassword" asp-controller="User">
        <div style="margin-bottom:10px;">
            <label>Email</label><br />
            <input type="email" name="email" required />
        </div>

        <button type="submit">Send a reset link</button>
    </form>
}